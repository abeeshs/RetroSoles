<div class="container-fluid">
  <div class="app">
    <div class="menu-toggle">
      <div class="hamburger">
        <span></span>
      </div>
    </div>

    <aside class="sidebar">


      <nav class="menu">
        <a href="/user-profile" class="menu-item {{this.about}}"><i class="fa-solid fa-user"></i> About Me</a>
        <a href="/user-all-address" class="menu-item {{this.address}}"><i class="fa-sharp fa-solid fa-address-card"></i>
          Address</a>
        <a href="/orders-list" class="menu-item {{this.orders}}"><i class="fa-solid fa-list"></i> Orders</a>
        <a href="/wishlist" class="menu-item {{this.wishlist}}"><i class="fa-solid fa-heart"></i> Wishlist</a>
        <a href="/Wallet" class="menu-item {{this.wallet}}"><i class="fa-solid fa-wallet"></i> Wallet</a>
      </nav>

    </aside>

    <main class="content ">
      {{#if order}}
      <div class="table-responsive">
        <table class="table align-middle mb-0 bg-white">
          <thead class="bg-light">
            <tr>
              <th>Product Name</th>
              <th>Ordered on</th>
              <th>Order Status</th>
              <th>Total Amount</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {{#each order}}
            <tr>
              <td>
                <div class="d-flex align-items-center">

                  <div class="ms-3">
                    {{#each products}}
                    <p class="fw-bold mb-1">{{this.productName}}</p>

                    {{/each}}
                  </div>
                </div>
              </td>
              <td>
                <p class="fw-normal mb-1">{{this.ordered_on}}</p>

              </td>
              {{#eq this.orderstatus 'Pending'}}
              <td>

                <span class="badge badge-danger rounded-pill d-inline">{{this.orderstatus}}</span>
              </td>
              {{else}}
              {{#eq this.orderstatus 'Cancelled'}}
              <td>

                <span class="badge badge-danger rounded-pill d-inline">{{this.orderstatus}}</span>
              </td>
              {{else}}
              <td>

                <span class="badge badge-success rounded-pill d-inline">{{this.orderstatus}}</span>
              </td>
              {{/eq}}
              {{/eq}}
              <td>Rs.{{this.grandTotal}}</td>
              <td>
                {{!-- <button type="button" class="btn btn-light" data-bs-toggle="modal"
                  data-bs-target="#exampleModal{{@index}}">
                  View Details
                </button> --}}
                <button type="button" class="btn btn-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample{{@index}}" aria-expanded="false" aria-controls="collapseExample">
                  View Details
                </button>
                {{#eq this.orderstatus 'Delivered'}}
                {{#if this.return}}
                <button type="button" class="btn btn-light">
                  <a href="/getInvoice/{{this.tracking_id}}">Invoice</a>
                  {{!-- <a href="/return-product?id={{this.tracking_id}}&total={{this.total}}"> Return</a> --}}
                </button>
                {{else}}
                {{/if}}
                {{/eq}}

                {{!-- collaps --}}
                <div class="collapse" id="collapseExample{{@index}}">
                  <div class="card card-body">
                    {{#eq this.orderstatus 'Confirmed'}}
                        <h5>Hello..</h5>
                        <p class="text-dark fw-bold">You order has been confirmed and will be shipped in next two days!
                        </p>
                        {{/eq}}
                        <div class="table-responsive">
                          <table class="table align-middle mb-0 bg-white">
                            <thead class="bg-light">
                              <tr>
                                <th>Product</th>
                                <th>Product Name</th>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Payment</th>
                                <th>Order Status</th>
                                <th>Sub Total</th>
                                <th>Actions</th>
                              </tr>
                            </thead>
                            <tbody>
                              {{#each products}}
                              <tr>
                                <td>
                                  <img src="{{this.image}}" alt="" style="width: 50px;height:50px;">

                                </td>
                                <td>
                                  <div class="d-flex align-items-center">

                                    <div class="ms-3">

                                      <p class="fw-bold mb-1 text-dark">{{this.productName}}</p>

                                    </div>

                                  </div>
                                </td>
                                <td>Rs.{{this.price}}</td>
                                <td>{{this.quantity}}</td>
                                <td>{{../this.payment.method}}</td>


                                {{#if this.cancelled}}
                                <td>

                                  <span class="badge badge-danger rounded-pill d-inline">Cancelled</span>
                                </td>
                                <td>Rs.{{this.priceTotal}}</td>
                                {{else}}
                                {{#if this.returned}}
                                <td>

                                  <span class="badge badge-danger rounded-pill d-inline">Returned</span>
                                </td>
                                <td>Rs.{{this.priceTotal}}</td>


                                {{else}}
                                <td>

                                  <span class="badge badge-success rounded-pill d-inline">{{../this.orderstatus}}</span>
                                </td>
                                <td>Rs.{{this.priceTotal}}</td>


                                {{/if}}
                                {{/if}}




                                {{#eq ../this.orderstatus 'Cancelled'}}

                                {{else}}
                                {{#eq ../this.orderstatus 'Delivered'}}

                                {{#if this.cancelled}}

                                {{else}}
                                {{#if this.returned}}

                                {{else}}
                                <td>
                                  {{!-- <a href="/getInvoice/{{../this.tracking_id}}">Invoice</a> --}}
                                  <a href="/return-product?track={{../this.tracking_id}}&productId={{this.productId}}">
                                    Return</a>
                                </td>
                                {{/if}}
                                {{/if}}


                                {{else}}

                                {{#eq ../this.orderstatus 'Returned'}}

                                {{else}}
                                <td>
                                  <a class="cancel  btn-primary"
                                    href="/cancel-order?track={{../this.tracking_id}}&productId={{this.productId}}">Cancel</a>


                                </td>

                                {{/eq}}
                                {{/eq}}
                                {{/eq}}




                                {{!-- <td>
                                  <span class="badge badge-success rounded-pill d-inline">{{../this.orderstatus}}</span>
                                </td> --}}

                              </tr>
                              {{/each}}


                            </tbody>
                          </table>
                        </div>
                        <div class="row">
                          {{!-- address --}}
                          <div class="col-md-6 col-lg-6">
                            <h5 class="ms-3 text-uppercase fw-bold" style="font-family:Candara;">Shipping Address</h5>
                            <div class="d-flex align-items-center">

                              <div class="ms-3">

                                <p class="fw-bold mb-1">
                                  {{this.address.firstname}},{{this.address.lastname}},{{this.address.address}},<br>
                                  {{this.address.city}},{{this.address.state}}-{{this.address.zipcode}}</p>
                                <p>Mobile:{{this.address.mobile}} <br>Email:{{this.address.email}}</p>


                              </div>

                            </div>

                          </div>
                          {{!-- total table --}}

                          <div class="col-md-6 col-lg-6">
                            <table class="table table-bordered">
                              <thead>
                                <tr>
                                  <h5 class="ms-3 text-uppercase fw-bold" style="font-family:Candara;">Price Details
                                  </h5>
                                </tr>
                              </thead>
                              <tbody>

                                <tr>
                                  <td class="fw-bold">Item Total <h4></h4>
                                  </td>
                                  <td class="text-end">₹ {{this.totalAmountOriginal}}</td>

                                </tr>
                                <tr>
                                  <td>Offer Price <h4></h4>
                                  </td>
                                  <td class="text-end">₹ {{this.totalOfferPrice}}</td>

                                </tr>
                                <tr>
                                  <td>Discount Applied</td>
                                  <td class="text-end"> <span style="color:green ;">-₹ {{this.couponPrice}}</span> </td>

                                </tr>
                                <tr>
                                  <td>After Discount</td>
                                  <td class="text-end">₹ {{this.grandTotal}}</td>

                                </tr>




                                {{!-- {{#eq this.totalAmountDiscounted "0"}}
                                <tr>
                                  <td class="text-danger">Cancelled</td>
                                  <td class="text-danger text-end">-₹ {{this.cancelledAmount}}</td>

                                </tr>
                                {{/eq}} --}}

                                {{#eq this.cancelledAmount 0}}
                                <tr>
                                  <td class="fw-bold ">Bill Total</td>
                                  <td class="fw-bold text-end">₹ {{this.totalAmountDiscounted}}</td>

                                </tr>
                                {{else}}

                                {{#eq this.orderstatus "Cancelled"}}
                                <tr>

                                  <td class="text-danger fw-bold">Cancelled</td>
                                </tr>
                                {{else}}
                                <tr>
                                  <td class="text-danger">Cancelled</td>
                                  <td class="text-danger text-end">-₹ {{this.cancelledAmount}}</td>

                                </tr>
                                <tr>
                                  <td class="fw-bold ">Bill Total</td>
                                  <td class="fw-bold text-end">₹ {{this.totalAmountDiscounted}}</td>

                                </tr>
                                {{/eq}}
                                {{/eq}}


                              </tbody>
                            </table>

                          </div>
                        </div>
                  </div>
                </div>
                <!-- Modal -->
                <div class="modal fade" id="exampleModal{{@index}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog modal-fullscreen-sm-down">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title text-uppercase fw-bold" id="exampleModalLabel">Order Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body ">
                        {{#eq this.orderstatus 'Confirmed'}}
                        <h5>Hello..</h5>
                        <p class="text-dark fw-bold">You order has been confirmed and will be shipped in next two days!
                        </p>
                        {{/eq}}
                        <div class="table-responsive">
                          <table class="table align-middle mb-0 bg-white">
                            <thead class="bg-light">
                              <tr>
                                <th>Product</th>
                                <th>Product Name</th>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Payment</th>
                                <th>Order Status</th>
                                <th>Sub Total</th>
                                <th>Actions</th>
                              </tr>
                            </thead>
                            <tbody>
                              {{#each products}}
                              <tr>
                                <td>
                                  <img src="{{this.image}}" alt="" style="width: 50px;height:50px;">

                                </td>
                                <td>
                                  <div class="d-flex align-items-center">

                                    <div class="ms-3">

                                      <p class="fw-bold mb-1 text-dark">{{this.productName}}</p>

                                    </div>

                                  </div>
                                </td>
                                <td>Rs.{{this.price}}</td>
                                <td>{{this.quantity}}</td>
                                <td>{{../this.payment.method}}</td>


                                {{#if this.cancelled}}
                                <td>

                                  <span class="badge badge-danger rounded-pill d-inline">Cancelled</span>
                                </td>
                                <td>Rs.{{this.priceTotal}}</td>
                                {{else}}
                                {{#if this.returned}}
                                <td>

                                  <span class="badge badge-danger rounded-pill d-inline">Returned</span>
                                </td>
                                <td>Rs.{{this.priceTotal}}</td>


                                {{else}}
                                <td>

                                  <span class="badge badge-success rounded-pill d-inline">{{../this.orderstatus}}</span>
                                </td>
                                <td>Rs.{{this.priceTotal}}</td>


                                {{/if}}
                                {{/if}}




                                {{#eq ../this.orderstatus 'Cancelled'}}

                                {{else}}
                                {{#eq ../this.orderstatus 'Delivered'}}

                                {{#if this.cancelled}}

                                {{else}}
                                {{#if this.returned}}

                                {{else}}
                                <td>
                                  {{!-- <a href="/getInvoice/{{../this.tracking_id}}">Invoice</a> --}}
                                  <a href="/return-product?track={{../this.tracking_id}}&productId={{this.productId}}">
                                    Return</a>
                                </td>
                                {{/if}}
                                {{/if}}


                                {{else}}

                                {{#eq ../this.orderstatus 'Returned'}}

                                {{else}}
                                <td>
                                  <a class="cancel  btn-primary"
                                    href="/cancel-order?track={{../this.tracking_id}}&productId={{this.productId}}">Cancel</a>


                                </td>

                                {{/eq}}
                                {{/eq}}
                                {{/eq}}




                                {{!-- <td>
                                  <span class="badge badge-success rounded-pill d-inline">{{../this.orderstatus}}</span>
                                </td> --}}

                              </tr>
                              {{/each}}


                            </tbody>
                          </table>
                        </div>
                        <div class="row">
                          {{!-- address --}}
                          <div class="col-md-6 col-lg-6">
                            <h5 class="ms-3 text-uppercase fw-bold" style="font-family:Candara;">Shipping Address</h5>
                            <div class="d-flex align-items-center">

                              <div class="ms-3">

                                <p class="fw-bold mb-1">
                                  {{this.address.firstname}},{{this.address.lastname}},{{this.address.address}},<br>
                                  {{this.address.city}},{{this.address.state}}-{{this.address.zipcode}}</p>
                                <p>Mobile:{{this.address.mobile}} <br>Email:{{this.address.email}}</p>


                              </div>

                            </div>

                          </div>
                          {{!-- total table --}}

                          <div class="col-md-6 col-lg-6">
                            <table class="table table-bordered">
                              <thead>
                                <tr>
                                  <h5 class="ms-3 text-uppercase fw-bold" style="font-family:Candara;">Price Details
                                  </h5>
                                </tr>
                              </thead>
                              <tbody>

                                <tr>
                                  <td class="fw-bold">Item Total <h4></h4>
                                  </td>
                                  <td class="text-end">₹ {{this.totalAmountOriginal}}</td>

                                </tr>
                                <tr>
                                  <td>Offer Price <h4></h4>
                                  </td>
                                  <td class="text-end">₹ {{this.totalOfferPrice}}</td>

                                </tr>
                                <tr>
                                  <td>Discount Applied</td>
                                  <td class="text-end"> <span style="color:green ;">-₹ {{this.couponPrice}}</span> </td>

                                </tr>
                                <tr>
                                  <td>After Discount</td>
                                  <td class="text-end">₹ {{this.grandTotal}}</td>

                                </tr>




                                {{!-- {{#eq this.totalAmountDiscounted "0"}}
                                <tr>
                                  <td class="text-danger">Cancelled</td>
                                  <td class="text-danger text-end">-₹ {{this.cancelledAmount}}</td>

                                </tr>
                                {{/eq}} --}}

                                {{#eq this.cancelledAmount 0}}
                                <tr>
                                  <td class="fw-bold ">Bill Total</td>
                                  <td class="fw-bold text-end">₹ {{this.totalAmountDiscounted}}</td>

                                </tr>
                                {{else}}

                                {{#eq this.orderstatus "Cancelled"}}
                                <tr>

                                  <td class="text-danger fw-bold">Cancelled</td>
                                </tr>
                                {{else}}
                                <tr>
                                  <td class="text-danger">Cancelled</td>
                                  <td class="text-danger text-end">-₹ {{this.cancelledAmount}}</td>

                                </tr>
                                <tr>
                                  <td class="fw-bold ">Bill Total</td>
                                  <td class="fw-bold text-end">₹ {{this.totalAmountDiscounted}}</td>

                                </tr>
                                {{/eq}}
                                {{/eq}}


                              </tbody>
                            </table>

                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>

              </td>
            </tr>
            {{/each}}

          </tbody>
        </table>

      </div>
      {{else}}
      <div class="container">
        <div class="col d-flex justify-content-center">
          <div class="card w-50">
            <a href="/products">
              <img src="/img/download.jpg" class="card-img-top" style="height:350px" alt="Palm Springs Road" />
              <div class="card-body d-flex justify-content-center">

                <p class="card-text"><a href="/products" class="primary-btn mb-5 ">Go to Shop</a></p>
              </div>
            </a>
          </div>
        </div>


      </div>
      {{/if}}
      {{!-- //pagination --}}
      <div class="row">
        <div class="col-lg-12">
          <div class="product__pagination">
            {{#each page}}
            <a class="active" href="/orders-list?&p={{this}}">{{this}}</a>
            {{/each}}
          </div>
        </div>
      </div>
    </main>


  </div>
  {{!-- //pagination --}}
  {{!-- <div class="d-flex justify-content-center align-item-center">
    <nav aria-label="...">
      <ul class="pagination pagination-sm">
        <li class="page-item active" aria-current="page">
          <span class="page-link">1</span>
        </li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
      </ul>
    </nav>
  </div> --}}

  <!-- Modal -->